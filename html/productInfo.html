<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" href="../css/home.css">
    <link rel="stylesheet" href="../css/productInfo.css">
    <title>Home</title>
</head>

<body>
    <header>
        <div class="backBtn">
            <i class="fa-solid fa-arrow-right-from-bracket"></i>
        </div>
        
        <div>
            <img src="../asset/image/profile.jpeg" alt="">
        </div>
    </header>

    <main class="main">
        <section class="productInfoSection">
            <div class="productInfoContainer">
                
            </div>
        </section>
    </main>

    <footer>
        <div class="shortcuts">
            <a class="shortcutsBtn" href="#">
                <i class="fa-solid fa-chalkboard-user"></i>
            </a>
            <a class="shortcutsBtn" href="calculator.html">
                <i class="fa-solid fa-calculator"></i>
            </a>
            <a class="shortcutsBtn" href="home.html">
                <i class="fa-solid fa-house"></i>
            </a>
            <a class="shortcutsBtn shortcutsBtnActive" href="product.html">
                <i class="fa-solid fa-boxes-packing"></i>
            </a>
            <a class="shortcutsBtn" href="event.html">
                <i class="fa-regular fa-calendar-check"></i>
            </a>
        </div>
    </footer>


    <script src="../javascript/home.js"></script>
    <script src="../javascript/productDetails.js"></script>

    <script>

        const urlParams = new URLSearchParams(window.location.search);
        const value = urlParams.get('value');

        const productInfoContainer = document.querySelector('.productInfoContainer');
        productInfoContainer.innerHTML = `
            <div>
                <div class="ratingStar">
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star-half-stroke"></i>
                </div>
                <div class="displayImg">
                    <img src="../asset/products/${allProducts[value].varients[0].image[0]}" alt="">
                </div>
                <div class="relatedImg">
                    
                </div>
            </div>

            <div class="details">
                <button class="share">
                    <i class="fa-solid fa-share-nodes"></i>
                </button>

                <h4>${allProducts[value].name}</h4>
                <p>MRP: â‚¹${allProducts[value].mrp}/-</p>
                <p>${allProducts[value].vp} vp</p>
                <p id="quantity">Net quantity: ${allProducts[value].varients[0].quantity}</p>
                <select name="" id="" class="flavour">
                    
                </select>
                <p>Description:</p>
                <p id="description">
                    
                </p>
            </div>
        `;

        const displayImg = document.querySelector('.displayImg');
        const relatedImg = document.querySelector('.relatedImg');
        relatedImg.innerHTML = ``;
        for (let i = 0; i < allProducts[value].varients[0].image.length; i++) {
            relatedImg.innerHTML += `
                <img class="relatedImgSelected" src="../asset/products/${allProducts[value].varients[0].image[i]}" alt="">
            `;
        }
        const relatedImgSelected = document.querySelectorAll('.relatedImgSelected');
        relatedImgSelected[0].style.borderColor = 'orange';
        relatedImgSelected.forEach((img, index) => {
            img.addEventListener('click', () => {
                relatedImgSelected.forEach(img => {
                    img.style.borderColor = 'rgb(200, 200, 200)'
                    displayImg.innerHTML = `<img src="../asset/products/${allProducts[value].varients[0].image[index]}" alt="">`;
                })
                img.style.borderColor = 'orange'

            })
        })

        const flavour = document.querySelector('.flavour');
        for (let i = 0; i < allProducts[value].varients.length; i++) {
            if (allProducts[value].varients[i].flavour === '') {
                flavour.style.display = 'none';
                break;
            } else {
                flavour.innerHTML += `
                    <option value="${i}" >${allProducts[value].varients[i].flavour}</option>
                `;
            }
        }
        flavour.addEventListener('change', (event) => {
            const selectedFlavour = event.target.value;

            const displayImg = document.querySelector('.displayImg');
            displayImg.innerHTML = `<img src="../asset/products/${allProducts[value].varients[selectedFlavour].image[0]}" alt="">`;

            const quantity = document.getElementById('quantity');
            quantity.innerText = `Net quantity: ${allProducts[value].varients[selectedFlavour].quantity}`;

            const relatedImg = document.querySelector('.relatedImg');
            relatedImg.innerHTML = ``;
            for (let i = 0; i < allProducts[value].varients[selectedFlavour].image.length; i++) {
                relatedImg.innerHTML += `
                    <img class="relatedImgSelected" src="../asset/products/${allProducts[value].varients[selectedFlavour].image[i]}" alt="">
                `;
            }
            const relatedImgSelected = document.querySelectorAll('.relatedImgSelected');
            relatedImgSelected[0].style.borderColor = 'orange';
            relatedImgSelected.forEach((img, index) => {
                img.addEventListener('click', () => {
                    relatedImgSelected.forEach(img => {
                        img.style.borderColor = 'rgb(200, 200, 200)'
                        displayImg.innerHTML = `<img src="../asset/products/${allProducts[value].varients[selectedFlavour].image[index]}" alt="">`;
                    })
                    img.style.borderColor = 'orange'

                })
            })
            
        })







        function addSpacesBetweenParagraphs(text) {
            const paragraphs = text.split('..');
            const formattedDescription = paragraphs.join(".\n\n");
            return formattedDescription;
        }

        // const description = document.getElementById('description').innerText;
        const formattedDescription = addSpacesBetweenParagraphs(`Formula 1 Nutritional Shake Mix is a delicious meal for healthy nutrition and weight management. It provides an ideal balance of protein and nutrition to help satisfy your hunger and provides you with energy.. Consumption of High Protein Meal Replacement (HPMR) along with a calorie-restricted diet and moderate physical activity daily, showed reduction in body weight and body fat percentage along with improvement/healthy maintenance of blood lipid profile.. Enjoy Formula 1 Nutritional Shake Mix once or twice a day along with portion-controlled nutrition and exercise to help keep the body fit.`);
        
        document.getElementById('description').innerText += formattedDescription;
    </script>

</body>

</html>